(this["webpackJsonppressure-mon"]=this["webpackJsonppressure-mon"]||[]).push([[0],{153:function(e,n,t){},154:function(e,n,t){},155:function(e,n,t){"use strict";t.r(n);var s=t(0),o=t.n(s),r=t(45),i=t.n(r),a=(t(57),t(2)),u=t(16),C=t(18),c=t(17),l=t(19);!function(){if("function"===typeof window.CustomEvent)return!1;function e(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),t}e.prototype=window.Event.prototype,window.CustomEvent=e}();var G=function e(n){var t=this;Object(a.a)(this,e),n=n||{};var s={url:("https:"===window.location.protocol?"wss:":"ws:")+"//"+window.location.host+"/epics2web/monitor",autoOpen:!0,autoReconnect:!0,autoLivenessPingAndTimeout:!0,autoDisplayClasses:!0,pingIntervalMillis:3e3,livenessTimoutMillis:2e3,reconnectWaitMillis:1e3,chunkedRequestPvsCount:400,clientName:window.location.href};for(var o in s)"undefined"!==typeof n[o]?this[o]=n[o]:this[o]=s[o];this.socket=null,this.eventElem=document.createElement("div"),this.lastUpdated=null,this.livenessTimer=null,this.reconnecting=!1;this.eventElem.addEventListener("open",(function(e){t.onopen(e)})),this.eventElem.addEventListener("close",(function(e){t.onclose(e)})),this.eventElem.addEventListener("connecting",(function(e){t.onconnecting(e)})),this.eventElem.addEventListener("closing",(function(e){t.onclosing(e)})),this.eventElem.addEventListener("error",(function(e){t.onerror(e)})),this.eventElem.addEventListener("message",(function(e){t.onmessage(e)})),this.eventElem.addEventListener("info",(function(e){t.oninfo(e)})),this.eventElem.addEventListener("update",(function(e){t.onupdate(e)})),this.eventElem.addEventListener("pong",(function(e){t.onpong(e)})),this.addEventListener=this.eventElem.addEventListener.bind(this.eventElem),this.removeEventListener=this.eventElem.removeEventListener.bind(this.eventElem),this.dispatchEvent=this.eventElem.dispatchEvent.bind(this.eventElem),this.open=function(){if(null!==t.socket&&t.socket.readyState!==WebSocket.CLOSED)return console.log("already connected"),1;var e=new CustomEvent("connecting");t.eventElem.dispatchEvent(e);var n=t.url;null!==t.clientName&&(n=n+"?clientName="+encodeURIComponent(t.clientName)),t.socket=new WebSocket(n),t.socket.onerror=function(e){console.log("server connection error",e);var n=new CustomEvent("error");t.eventElem.dispatchEvent(n)},t.socket.onclose=function(e){console.log("server connection closed");var n=new CustomEvent("close");t.eventElem.dispatchEvent(n),null!==t.livenessTimer&&(clearTimeout(t.livenessTimer),t.livenessTimer=null);var s=null===t.socket||t.socket.readyState===WebSocket.CLOSED;t.autoReconnect&&!t.reconnecting&&s?(console.log("attempting to reconnect after delay"),t.reconnecting=!0,setTimeout((function(){console.log("reconnect timer triggered"),t.open(),t.reconnecting=!1}),t.reconnectWaitMillis)):console.log("socket is not closed (socket is connecting, closing, or reconnecting / delayed connecting)")},t.socket.onmessage=function(e){null!==t.livenessTimer&&(clearTimeout(t.livenessTimer),t.livenessTimer=null),t.lastUpdated=new Date;var n=JSON.parse(e.data);n.date=t.lastUpdated,"update"===n.type?t.eventElem.dispatchEvent(new CustomEvent("update",{detail:n})):"info"===n.type?t.eventElem.dispatchEvent(new CustomEvent("info",{detail:n})):"pong"===n.type&&t.eventElem.dispatchEvent(new CustomEvent("pong")),t.eventElem.dispatchEvent(new CustomEvent("message"),{detail:n})},t.socket.onopen=function(e){console.log("server connection open"),t.lastUpdated=new Date;var n=new CustomEvent("open");t.eventElem.dispatchEvent(n)}},this.close=function(e,n){console.log("close"),null!==t.socket&&t.socket.readyState!==WebSocket.CLOSED?("undefined"===typeof e&&(e=1e3),t.socket.close(e,n)):console.log("already closed")},this.monitorPvs=function(e){var n,s,o;if(t.chunkedRequestPvsCount>0)for(n=0,s=e.length;n<s;n+=t.chunkedRequestPvsCount)o=e.slice(n,n+t.chunkedRequestPvsCount),t.monitorPvsChunk(o);else t.monitorPvsChunk(e)},this.monitorPvsChunk=function(e){var n={type:"monitor",pvs:e};t.socket.send(JSON.stringify(n))},this.clearPvs=function(e){var n,s,o;if(t.chunkedRequestPvsCount>0)for(n=0,s=e.length;n<s;n+=t.chunkedRequestPvsCount)o=e.slice(n,n+t.chunkedRequestPvsCount),t.clearPvsChunk(o);else t.clearPvsChunk(e)},this.clearPvsChunk=function(e){var n={type:"clear",pvs:e};t.socket.send(JSON.stringify(n))},this.ping=function(){t.socket.send(JSON.stringify({type:"ping"}))},!0===this.autoDisplayClasses&&(this.eventElem.addEventListener("connecting",(function(e){console.log("connecting")})),this.eventElem.addEventListener("open",(function(e){console.log("open")})),this.eventElem.addEventListener("close",(function(e){console.log("close")}))),!0===this.autoOpen&&this.open(),!0===this.autoLivenessPingAndTimeout&&window.setInterval((function(){null!==t.socket&&t.socket.readyState===WebSocket.OPEN&&(t.ping(),null!==t.livenessTimer||(t.livenessTimer=setTimeout((function(){this.socket.readyState===WebSocket.OPEN&&this.socket.close(),this.livenessTimer=null}),t.livenessTimoutMillis)))}),this.pingIntervalMillis)};G.prototype.onopen=function(){},G.prototype.onclose=function(){},G.prototype.onconnecting=function(){},G.prototype.onclosing=function(){},G.prototype.onmessage=function(){},G.prototype.onerror=function(){},G.prototype.onupdate=function(){},G.prototype.oninfo=function(){},G.prototype.onpong=function(){};var M=new function e(){Object(a.a)(this,e),this.createClientConnection=function(e){return new G(e)},e.instance||(e.instance=this,this.epics2web={})};M.epics2web.isNumericEpicsType=function(e){var n;switch(e){case"DBR_DOUBLE":case"DBR_FLOAT":case"DBR_INT":case"DBR_SHORT":case"DBR_BYTE":n=!0;break;default:n=!1}return n};var d=new function e(){return Object(a.a)(this,e),e.instance||(e.instance=this),this.epics2webHost="10.0.38.42",this.epics2webLocation="/epics2web",this.epics2webWs="ws://"+this.epics2webHost+this.epics2webLocation+"/monitor",this.epics2webOptions={url:this.epics2webWs,autoOpen:!0,autoReconnect:!0,autoLivenessPingAndTimeout:!0,autoDisplayClasses:!0,pingIntervalMillis:3e3,livenessTimoutMillis:2e3,reconnectWaitMillis:1e3,chunkedRequestPvsCount:400},e.instance};Object.freeze(d);var p=function e(n){var t=this;Object(a.a)(this,e),this.disconnect=function(){t.con&&(t.con.autoReconnect=!1,t.con.close())},this.monitoredPVsList=n,this.con=M.createClientConnection(d.epics2webOptions),this.pvData={},this.monitoredPVsList.forEach((function(e){t.pvData[e]={date:null,value:null,datatype:null,count:null}})),this.con.onopen=function(e){t.con.monitorPvs(t.monitoredPVsList)},this.con.onupdate=function(e){t.pvData[e.detail.pv].date=e.detail.date,t.pvData[e.detail.pv].value=e.detail.value},this.con.oninfo=function(e){t.pvData[e.detail.pv].datatype=e.detail.datatype,t.pvData[e.detail.pv].count=e.detail.count,t.pvData[e.detail.pv].date=e.detail.date,"undefined"!==typeof e.detail["enum-labels"]&&console.log("Enum Labels: "+e.detail["enum-labels"])}},v=t(46),S=new function e(){return Object(a.a)(this,e),e.instance||(e.instance=this),this.MAJOR_BG="rgba(245,0,0,0.8)",this.MAJOR_LINE="rgba(245,0,0,1)",this.OK_BG="rgba(65,190,60,0.2)",this.OK_LINE="rgba(65,190,60,0.6)",this.MINOR_BG="rgba(359,200, 0,0.8)",this.MINOR_LINE="rgba(359,200, 0,1)",this.HOVER_LINE="#FFFFFF",e.this};Object.freeze(S);t(153);var P=function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(C.a)(this,Object(c.a)(n).call(this,e))).updatePVValues=function(){t.values=t.props.pvs.map((function(e){return t.epics.pvData[e].value})),t.alarms.bg=t.values.map((function(e){if(e)return e<t.minorVal?S.OK_BG:e>=t.minorVal&&e<t.majorVal?S.MINOR_BG:S.MAJOR_BG})),t.alarms.border=t.values.map((function(e){return e?e<t.minorVal?S.OK_LINE:e>=t.minorVal&&e<t.majorVal?S.MINOR_LINE:void 0:S.MAJOR_LINE}))},t.updateContent=function(){t.updatePVValues();var e={labels:t.props.pvs,datasets:[{label:"MKS - Cold Cathode",backgroundColor:t.alarms.bg,borderColor:t.alarms.border,borderWidth:1,hoverBackgroundColor:S.OK_BG,hoverBorderColor:S.HOVER_LINE,data:t.values},{label:"Minor Alarm",type:"line",fill:!1,backgroundColor:S.MINOR_BG,borderColor:S.MINOR_LINE,borderWidth:1,data:t.minor},{label:"Major Alarm",type:"line",fill:!1,backgroundColor:S.MAJOR_BG,borderColor:S.MAJOR_LINE,borderWidth:1,data:t.major}]};t.setState({chartData:e})},t.customTooltip=function(e){if(0!==e.opacity){var n=e.dataPoints[0].xLabel,s=e.dataPoints[0].yLabel;t.setState({tooltipVisible:!0,tooltipX:n,tooltipY:s})}else t.setState({tooltipVisible:!1})},t.state={tooltipText:"",tooltipVisible:!1},t.timer=null,t.refreshInterval=100,t.epics=new p(t.props.pvs),t.minorVal=1e-8,t.majorVal=1e-6,t.minor=t.props.pvs.map((function(){return t.minorVal})),t.major=t.props.pvs.map((function(){return t.majorVal})),t.values=[],t.alarms={bg:[],border:[]},t}return Object(l.a)(n,e),Object(u.a)(n,[{key:"componentDidUpdate",value:function(e,n,t){}},{key:"componentDidMount",value:function(){this.timer=setInterval(this.updateContent,this.refreshInterval)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.epics.disconnect()}},{key:"renderBar",value:function(){return o.a.createElement(v.a,{data:this.state.chartData,width:950,height:650,options:{tooltips:{mode:"index",enabled:!1,custom:this.customTooltip},maintainAspectRatio:!1,responsive:!0,legend:{position:"bottom",align:"center"},scales:{yAxes:[{ticks:{min:1e-12,max:1e-6},display:!0,type:"logarithmic"}]}}})}},{key:"render",value:function(){return o.a.createElement("div",{className:"PressureBar"},this.props.title,o.a.createElement("table",{align:"center"},o.a.createElement("tbody",null,this.state.tooltipVisible?o.a.createElement("tr",null,o.a.createElement("td",null,this.state.tooltipX),o.a.createElement("td",null,this.state.tooltipY)):o.a.createElement("tr",null,o.a.createElement("td",null,"\xa0"),o.a.createElement("td",null,"\xa0")))),this.state.chartData?o.a.createElement("article",{className:"GraphContainer"}," ",this.renderBar()," "):"loading...")}}]),n}(o.a.Component);P.defaultProps={title:"A graph"};var E=P,m=t(48),B=t(49),A=t(50),V=t(51),h=(t(154),0),I=1,f=2,b=3,D=4,g=function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(C.a)(this,Object(c.a)(n).call(this,e))).renderNav=function(){return t.state.content!=h?o.a.createElement("div",{className:"Menu"},o.a.createElement("button",{type:"button",onClick:function(){return t.setState({content:h})}},"Back")):o.a.createElement("div",{className:"Menu"},o.a.createElement("div",{className:"MainTitle"},"Sirius - Pressure Readings"),o.a.createElement("div",{className:"SubTitle"},"Cold Cathode Gauge"),o.a.createElement("button",{type:"button",onClick:function(){return t.setState({content:I})}},"BO"),o.a.createElement("br",null),o.a.createElement("button",{type:"button",onClick:function(){return t.setState({content:f})}},"SI"),o.a.createElement("br",null),o.a.createElement("button",{type:"button",onClick:function(){return t.setState({content:D})}},"TS"),o.a.createElement("br",null),o.a.createElement("button",{type:"button",onClick:function(){return t.setState({content:b})}},"TB"),o.a.createElement("br",null))},t.renderGraph=function(){switch(t.state.content){case I:return o.a.createElement(E,{pvs:m,title:"BO - Pressure (mBar)"});case f:return o.a.createElement(E,{pvs:B,title:"SI - Pressure (mBar)"});case b:return o.a.createElement(E,{pvs:A,title:"TB - Pressure (mBar)"});case D:return o.a.createElement(E,{pvs:V,title:"TS - Pressure (mBar)"});default:return o.a.createElement("div",null)}},t.state={content:h},t}return Object(l.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},this.renderGraph(),this.renderNav())}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},48:function(e){e.exports=JSON.parse('["BO-01U:VA-CCG-BG:Pressure-Mon","BO-04U:VA-CCG-BG:Pressure-Mon","BO-05D:VA-CCG-RFC:Pressure-Mon","BO-06U:VA-CCG-ED:Pressure-Mon","BO-09U:VA-CCG-BG:Pressure-Mon","BO-11U:VA-CCG-ED:Pressure-Mon","BO-14U:VA-CCG-BG:Pressure-Mon","BO-16U:VA-CCG-ED:Pressure-Mon","BO-19U:VA-CCG-BG:Pressure-Mon","BO-21U:VA-CCG-ED:Pressure-Mon","BO-24U:VA-CCG-BG:Pressure-Mon","BO-26U:VA-CCG-ED:Pressure-Mon","BO-29U:VA-CCG-BG:Pressure-Mon","BO-31U:VA-CCG-ED:Pressure-Mon","BO-34U:VA-CCG-BG:Pressure-Mon","BO-36U:VA-CCG-ED:Pressure-Mon","BO-39U:VA-CCG-BG:Pressure-Mon","BO-41U:VA-CCG-ED:Pressure-Mon","BO-44U:VA-CCG-BG:Pressure-Mon","BO-46U:VA-CCG-ED:Pressure-Mon","BO-47U:VA-CCG-ED:Pressure-Mon","BO-49U:VA-CCG-BG:Pressure-Mon"]')},49:function(e){e.exports=JSON.parse('["SI-01ASFE:VA-CCG-MD:Pressure-Mon","SI-01BCFE:VA-CCG-MD:Pressure-Mon","SI-01C1:VA-CCG-BG:Pressure-Mon","SI-01C2FE:VA-CCG-MD:Pressure-Mon","SI-01C3:VA-CCG-BG:Pressure-Mon","SI-01SA:VA-CCG-BG:Pressure-Mon","SI-01SAFE:VA-CCG-MD:Pressure-Mon","SI-02BCFE:VA-CCG-MD:Pressure-Mon","SI-02C1:VA-CCG-BG:Pressure-Mon","SI-02C3:VA-CCG-BG:Pressure-Mon","SI-02SB:VA-CCG-BG:Pressure-Mon","SI-02SB:VA-CCG-CAV:Pressure-Mon","SI-02SBFE:VA-CCG-MD:Pressure-Mon","SI-03BCFE:VA-CCG-MD:Pressure-Mon","SI-03C1:VA-CCG-BG:Pressure-Mon","SI-03C2FE:VA-CCG-MD:Pressure-Mon","SI-03C3:VA-CCG-BG:Pressure-Mon","SI-03SP:VA-CCG-BG:Pressure-Mon","SI-03SPFE:VA-CCG-MD:Pressure-Mon","SI-04BCFE:VA-CCG-MD:Pressure-Mon","SI-04C1:VA-CCG-BG:Pressure-Mon","SI-04C3:VA-CCG-BG:Pressure-Mon","SI-04SB:VA-CCG-BG:Pressure-Mon","SI-04SBFE:VA-CCG-MD:Pressure-Mon","SI-04SPFE:VA-CCG-BG:Pressure-Mon","SI-05BCFE:VA-CCG-MD:Pressure-Mon","SI-05C1:VA-CCG-BG:Pressure-Mon","SI-05C2FE:VA-CCG-MD:Pressure-Mon","SI-05C3:VA-CCG-BG:Pressure-Mon","SI-05SA:VA-CCG-BG:Pressure-Mon","SI-05SAFE:VA-CCG-MD:Pressure-Mon","SI-06BCFE:VA-CCG-MD:Pressure-Mon","SI-06C1:VA-CCG-BG:Pressure-Mon","SI-06C3:VA-CCG-BG:Pressure-Mon","SI-06SB:VA-CCG-BG:Pressure-Mon","SI-06SBFE:VA-CCG-MD:Pressure-Mon","SI-07BCFE:VA-CCG-MD:Pressure-Mon","SI-07C1:VA-CCG-BG:Pressure-Mon","SI-07C2FE:VA-CCG-MD:Pressure-Mon","SI-07C3:VA-CCG-BG:Pressure-Mon","SI-07SP:VA-CCG-BG:Pressure-Mon","SI-07SPFE:VA-CCG-MD:Pressure-Mon","SI-08BCFE:VA-CCG-MD:Pressure-Mon","SI-08C1:VA-CCG-BG:Pressure-Mon","SI-08C3:VA-CCG-BG:Pressure-Mon","SI-08SB:VA-CCG-BG:Pressure-Mon","SI-08SBFE:VA-CCG-MD:Pressure-Mon","SI-09BCFE:VA-CCG-MD:Pressure-Mon","SI-09C1:VA-CCG-BG:Pressure-Mon","SI-09C2FE:VA-CCG-MD:Pressure-Mon","SI-09C3:VA-CCG-BG:Pressure-Mon","SI-09SA:VA-CCG-BG:Pressure-Mon","SI-09SAFE:VA-CCG-MD:Pressure-Mon","SI-10BCFE:VA-CCG-MD:Pressure-Mon","SI-10C1:VA-CCG-BG:Pressure-Mon","SI-10C3:VA-CCG-BG:Pressure-Mon","SI-10SB:VA-CCG-BG:Pressure-Mon","SI-10SBFE:VA-CCG-MD:Pressure-Mon","SI-11BCFE:VA-CCG-MD:Pressure-Mon","SI-11C1:VA-CCG-BG:Pressure-Mon","SI-11C2FE:VA-CCG-MD:Pressure-Mon","SI-11C3:VA-CCG-BG:Pressure-Mon","SI-11SP:VA-CCG-BG:Pressure-Mon","SI-11SPFE:VA-CCG-MD:Pressure-Mon","SI-12BCFE:VA-CCG-MD:Pressure-Mon","SI-12C1:VA-CCG-BG:Pressure-Mon","SI-12C3:VA-CCG-BG:Pressure-Mon","SI-12SB:VA-CCG-BG:Pressure-Mon","SI-12SBFE:VA-CCG-MD:Pressure-Mon","SI-13BCFE:VA-CCG-MD:Pressure-Mon","SI-13C1:VA-CCG-BG:Pressure-Mon","SI-13C2FE:VA-CCG-MD:Pressure-Mon","SI-13C3:VA-CCG-BG:Pressure-Mon","SI-13SA:VA-CCG-BG:Pressure-Mon","SI-13SAFE:VA-CCG-MD:Pressure-Mon","SI-14BCFE:VA-CCG-MD:Pressure-Mon","SI-14C1:VA-CCG-BG:Pressure-Mon","SI-14C3:VA-CCG-BG:Pressure-Mon","SI-14SB:VA-CCG-BG:Pressure-Mon","SI-14SBFE:VA-CCG-MD:Pressure-Mon","SI-15BCFE:VA-CCG-MD:Pressure-Mon","SI-15C1:VA-CCG-BG:Pressure-Mon","SI-15C2FE:VA-CCG-MD:Pressure-Mon","SI-15C3:VA-CCG-BG:Pressure-Mon","SI-15SP:VA-CCG-BG:Pressure-Mon","SI-15SPFE:VA-CCG-MD:Pressure-Mon","SI-16BCFE:VA-CCG-MD:Pressure-Mon","SI-16C1:VA-CCG-BG:Pressure-Mon","SI-16C3:VA-CCG-BG:Pressure-Mon","SI-16SB:VA-CCG-BG:Pressure-Mon","SI-16SBFE:VA-CCG-MD:Pressure-Mon","SI-17BCFE:VA-CCG-MD:Pressure-Mon","SI-17C1:VA-CCG-BG:Pressure-Mon","SI-17C2FE:VA-CCG-MD:Pressure-Mon","SI-17C3:VA-CCG-BG:Pressure-Mon","SI-17SA:VA-CCG-BG:Pressure-Mon","SI-17SAFE:VA-CCG-MD:Pressure-Mon","SI-18BCFE:VA-CCG-MD:Pressure-Mon","SI-18C1:VA-CCG-BG:Pressure-Mon","SI-18C3:VA-CCG-BG:Pressure-Mon","SI-18SB:VA-CCG-BG:Pressure-Mon","SI-18SBFE:VA-CCG-MD:Pressure-Mon","SI-19BCFE:VA-CCG-MD:Pressure-Mon","SI-19C1:VA-CCG-BG:Pressure-Mon","SI-19C2FE:VA-CCG-MD:Pressure-Mon","SI-19C3:VA-CCG-BG:Pressure-Mon","SI-19SP:VA-CCG-BG:Pressure-Mon","SI-19SPFE:VA-CCG-MD:Pressure-Mon","SI-20BCFE:VA-CCG-MD:Pressure-Mon","SI-20C1:VA-CCG-BG:Pressure-Mon","SI-20C3:VA-CCG-BG:Pressure-Mon","SI-20SB:VA-CCG-BG:Pressure-Mon","SI-20SBFE:VA-CCG-MD:Pressure-Mon"]')},50:function(e){e.exports=JSON.parse('["TB-01:VA-CCG-ED:Pressure-Mon","TB-04:VA-CCG-ED:Pressure-Mon"]')},51:function(e){e.exports=JSON.parse('["TS-01:VA-CCG-BG:Pressure-Mon","TS-01:VA-CCG-ED:Pressure-Mon","TS-04:VA-CCG-BG:Pressure-Mon","TS-04:VA-CCG-MD:Pressure-Mon"]')},52:function(e,n,t){e.exports=t(155)},57:function(e,n,t){}},[[52,1,2]]]);
//# sourceMappingURL=main.3f3acb5a.chunk.js.map